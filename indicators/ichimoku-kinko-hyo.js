/*
 Highstock JS v8.2.2 (2020-12-12)

 Indicator series type for Highstock

 (c) 2010-2019 Sebastian Bochan

 License: www.highcharts.com/license
*/
(function(f){"object"===typeof module&&module.exports?(f["default"]=f,module.exports=f):"function"===typeof define&&define.amd?define("highcharts/indicators/ichimoku-kinko-hyo",["highcharts","highcharts/modules/stock"],function(m){f(m);f.Highcharts=m;return f}):f("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(f){function m(f,v,m,n){f.hasOwnProperty(v)||(f[v]=n.apply(null,m))}f=f?f._modules:{};m(f,"Stock/Indicators/IKH/IKHIndicator.js",[f["Core/Series/Series.js"],f["Core/Color/Color.js"],
f["Core/Globals.js"],f["Core/Utilities.js"]],function(f,m,E,n){function v(d){return d.reduce(function(b,a){return Math.max(b,a[1])},-Infinity)}function I(d){return d.reduce(function(b,a){return Math.min(b,a[2])},Infinity)}function y(d){return{high:v(d),low:I(d)}}function J(d){var b,a,h,c,p;d.series.forEach(function(d){if(d.xData)for(c=d.xData,p=a=d.xIncrement?1:c.length-1;0<p;p--)if(h=c[p]-c[p-1],"undefined"===typeof b||h<b)b=h});return b}function K(d,b,a,h){if(d&&b&&a&&h){var c=b.plotX-d.plotX;b=
b.plotY-d.plotY;var p=h.plotX-a.plotX;h=h.plotY-a.plotY;var f=d.plotX-a.plotX,A=d.plotY-a.plotY;a=(-b*f+c*A)/(-p*b+c*h);p=(p*A-h*f)/(-p*b+c*h);if(0<=a&&1>=a&&0<=p&&1>=p)return{plotX:d.plotX+p*c,plotY:d.plotY+p*b}}return!1}function F(d){var b=d.indicator;b.points=d.points;b.nextPoints=d.nextPoints;b.color=d.color;b.options=B(d.options.senkouSpan.styles,d.gap);b.graph=d.graph;b.fillGraph=!0;f.seriesTypes.sma.prototype.drawGraph.call(b)}var L=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return d(b,a)};return function(b,a){function h(){this.constructor=b}d(b,a);b.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),G=f.seriesTypes.sma,C=m.parse,H=n.defined;m=n.extend;var M=n.isArray,B=n.merge,N=n.objectEach;E.approximations["ichimoku-averages"]=function(){var d=[],b;[].forEach.call(arguments,function(a,h){d.push(E.approximations.average(a));
b=!b&&"undefined"===typeof d[h]});return b?void 0:d};n=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.data=void 0;a.options=void 0;a.points=void 0;a.graphCollection=void 0;a.graphsenkouSpan=void 0;a.ikhMap=void 0;a.nextPoints=void 0;return a}L(b,d);b.prototype.init=function(){f.seriesTypes.sma.prototype.init.apply(this,arguments);this.options=B({tenkanLine:{styles:{lineColor:this.color}},kijunLine:{styles:{lineColor:this.color}},chikouLine:{styles:{lineColor:this.color}},
senkouSpanA:{styles:{lineColor:this.color,fill:C(this.color).setOpacity(.5).get()}},senkouSpanB:{styles:{lineColor:this.color,fill:C(this.color).setOpacity(.5).get()}},senkouSpan:{styles:{fill:C(this.color).setOpacity(.2).get()}}},this.options)};b.prototype.toYData=function(a){return[a.tenkanSen,a.kijunSen,a.chikouSpan,a.senkouSpanA,a.senkouSpanB]};b.prototype.translate=function(){var a=this;f.seriesTypes.sma.prototype.translate.apply(a);a.points.forEach(function(b){a.pointArrayMap.forEach(function(c){H(b[c])&&
(b["plot"+c]=a.yAxis.toPixels(b[c],!0),b.plotY=b["plot"+c],b.tooltipPos=[b.plotX,b["plot"+c]],b.isNull=!1)})})};b.prototype.drawGraph=function(){var a=this,b=a.points,c=b.length,d=a.options,m=a.graph,A=a.color,n={options:{gapSize:d.gapSize}},l=a.pointArrayMap.length,w=[[],[],[],[],[],[]],e={tenkanLine:w[0],kijunLine:w[1],chikouLine:w[2],senkouSpanA:w[3],senkouSpanB:w[4],senkouSpan:w[5]},t=[],g=a.options.senkouSpan,u=g.color||g.styles.fill,D=g.negativeColor,q=[[],[]],x=[[],[]],v=0,r,y,z;for(a.ikhMap=
e;c--;){var k=b[c];for(r=0;r<l;r++)g=a.pointArrayMap[r],H(k[g])&&w[r].push({plotX:k.plotX,plotY:k["plot"+g],isNull:!1});D&&c!==b.length-1&&(g=e.senkouSpanB.length-1,k=K(e.senkouSpanA[g-1],e.senkouSpanA[g],e.senkouSpanB[g-1],e.senkouSpanB[g]),r={plotX:k.plotX,plotY:k.plotY,isNull:!1,intersectPoint:!0},k&&(e.senkouSpanA.splice(g,0,r),e.senkouSpanB.splice(g,0,r),t.push(g)))}N(e,function(b,c){d[c]&&"senkouSpan"!==c&&(a.points=w[v],a.options=B(d[c].styles,n),a.graph=a["graph"+c],a.fillGraph=!1,a.color=
A,f.seriesTypes.sma.prototype.drawGraph.call(a),a["graph"+c]=a.graph);v++});a.graphCollection&&a.graphCollection.forEach(function(c){a[c].destroy();delete a[c]});a.graphCollection=[];if(D&&e.senkouSpanA[0]&&e.senkouSpanB[0]){t.unshift(0);t.push(e.senkouSpanA.length-1);for(l=0;l<t.length-1;l++){g=t[l];k=t[l+1];c=e.senkouSpanB.slice(g,k+1);g=e.senkouSpanA.slice(g,k+1);if(1<=Math.floor(c.length/2))if(k=Math.floor(c.length/2),c[k].plotY===g[k].plotY){for(z=r=k=0;z<c.length;z++)k+=c[z].plotY,r+=g[z].plotY;
k=k>r?0:1}else k=c[k].plotY>g[k].plotY?0:1;else k=c[0].plotY>g[0].plotY?0:1;q[k]=q[k].concat(c);x[k]=x[k].concat(g)}["graphsenkouSpanColor","graphsenkouSpanNegativeColor"].forEach(function(c,b){q[b].length&&x[b].length&&(y=0===b?u:D,F({indicator:a,points:q[b],nextPoints:x[b],color:y,options:d,gap:n,graph:a[c]}),a[c]=a.graph,a.graphCollection.push(c))})}else F({indicator:a,points:e.senkouSpanB,nextPoints:e.senkouSpanA,color:u,options:d,gap:n,graph:a.graphsenkouSpan}),a.graphsenkouSpan=a.graph;delete a.nextPoints;
delete a.fillGraph;a.points=b;a.options=d;a.graph=m};b.prototype.getGraphPath=function(a){var b=[],c;a=a||this.points;if(this.fillGraph&&this.nextPoints){if((c=f.seriesTypes.sma.prototype.getGraphPath.call(this,this.nextPoints))&&c.length){c[0][0]="L";b=f.seriesTypes.sma.prototype.getGraphPath.call(this,a);c=c.slice(0,b.length);for(var d=c.length-1;0<=d;d--)b.push(c[d])}}else b=f.seriesTypes.sma.prototype.getGraphPath.apply(this,arguments);return b};b.prototype.getValues=function(a,b){var c=b.period,
d=b.periodTenkan;b=b.periodSenkouSpanB;var f=a.xData,h=a.yData,n=h&&h.length||0;a=J(a.xAxis);var l=[],m=[],e;if(!(f.length<=c)&&M(h[0])&&4===h[0].length){var t=f[0]-c*a;for(e=0;e<c;e++)m.push(t+e*a);for(e=0;e<n;e++){if(e>=d){var g=h.slice(e-d,e);g=y(g);g=(g.high+g.low)/2}if(e>=c){var u=h.slice(e-c,e);u=y(u);u=(u.high+u.low)/2;var v=(g+u)/2}if(e>=b){var q=h.slice(e-b,e);q=y(q);q=(q.high+q.low)/2}t=h[e][3];var x=f[e];"undefined"===typeof l[e]&&(l[e]=[]);"undefined"===typeof l[e+c]&&(l[e+c]=[]);l[e+
c][0]=g;l[e+c][1]=u;l[e+c][2]=void 0;l[e][2]=t;e<=c&&(l[e+c][3]=void 0,l[e+c][4]=void 0);"undefined"===typeof l[e+2*c]&&(l[e+2*c]=[]);l[e+2*c][3]=v;l[e+2*c][4]=q;m.push(x)}for(e=1;e<=c;e++)m.push(x+e*a);return{values:l,xData:m,yData:l}}};b.defaultOptions=B(G.defaultOptions,{params:{period:26,periodTenkan:9,periodSenkouSpanB:52},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>TENKAN SEN: {point.tenkanSen:.3f}<br/>KIJUN SEN: {point.kijunSen:.3f}<br/>CHIKOU SPAN: {point.chikouSpan:.3f}<br/>SENKOU SPAN A: {point.senkouSpanA:.3f}<br/>SENKOU SPAN B: {point.senkouSpanB:.3f}<br/>'},
tenkanLine:{styles:{lineWidth:1,lineColor:void 0}},kijunLine:{styles:{lineWidth:1,lineColor:void 0}},chikouLine:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanA:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanB:{styles:{lineWidth:1,lineColor:void 0}},senkouSpan:{styles:{fill:"rgba(255, 0, 0, 0.5)"}},dataGrouping:{approximation:"ichimoku-averages"}});return b}(G);m(n.prototype,{pointArrayMap:["tenkanSen","kijunSen","chikouSpan","senkouSpanA","senkouSpanB"],pointValKey:"tenkanSen",nameComponents:["periodSenkouSpanB",
"period","periodTenkan"]});f.registerSeriesType("ikh",n);"";return n});m(f,"masters/indicators/ichimoku-kinko-hyo.src.js",[],function(){})});
//# sourceMappingURL=ichimoku-kinko-hyo.js.map